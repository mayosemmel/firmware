configure() {
	## set hostname
	if name=$(uci -q get gateway.@gateway[0].name); then
		uci -q set system.@system[0].hostname="$name"
		uci -q set fff.system.hostname="$name"
	else
		echo "WARNING: No gateway name set!"
	fi

	## set location
	if lat=$(uci -q get gateway.@gateway[0].latitude) && long=$(uci -q get gateway.@gateway[0].longitude); then
		uci -q set fff.system.latitude="$lat"
		uci -q set fff.system.longitude="$long"
	else
		echo "WARNING: No gateway location set!"
	fi

	## hoodname
	if hood=$(uci -q get gateway.@gateway[0].hoodname); then
		echo "Setting hood name: $hood"
		uci -q set "system.@system[0].hood=$hood"
	else
		echo "WARNING: No hoodname set!"
	fi
}

apply() {
	uci commit system
	uci commit fff
	echo "$(uci get "system.@system[0].hostname")" > /proc/sys/kernel/hostname
}

revert() {
	uci revert system
	uci revert fff
}
